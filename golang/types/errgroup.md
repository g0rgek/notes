API схоже с [[sync.Waitgroup]].
Запускаем N кол-во горутин. Если в одной из них возникает ошибка - прекращаем выполнение всех горутин.