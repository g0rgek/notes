Это связано с AST. Когда оно строится, потом происходят SSA оптимизации, SSA не умеет на всю длину дерева. Если функция очень длинная, и мы не можем её декомпозировать, но мы можем изолировать скоупы, то SSA сможет сделать оптимизации.